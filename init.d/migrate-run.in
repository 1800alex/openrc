#!@PREFIX@/sbin/runscript
# Copyright 1999-2011 Gentoo Foundation
# Released under the 2-clause BSD license.

description="Migrate /var/run and /var/lock to /run"

depend()
{
	before *
	after localmount
}

start()
{
	einfo "starting $RC_SVCNAME"
	return 0
}

stop()
{
	einfo "completing /var/run and /var/lock migration."
	if [ -d /run ]; then
		if [ ! -L /var/lock ]; then
			ebegin "Migrating /var/lock to /run"
			rm -rf /var/lock
			ln -s /run/lock /var/lock
			eend 0
		fi
		if [ ! -L /var/run ]; then
			ebegin "Migrating /var/run to /run"
			rm -rf /var/run
			ln -s /run /var/run
			eend 0
		fi
	fi
	return 0
}
